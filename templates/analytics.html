{% extends "base.html" %}

{% block title %}Analytics - MindfulMoney{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Spending Analytics</h2>
    <p>Understand your financial habits</p>
</div>

<div class="analytics-summary">
    <div class="stat-card income">
        <h3>Total Income</h3>
        <p class="stat-value">R{{ "%.2f"|format(summary.total_income) }}</p>
    </div>
    
    <div class="stat-card spending">
        <h3>Total Spending</h3>
        <p class="stat-value">R{{ "%.2f"|format(summary.total_spending) }}</p>
    </div>
    
    <div class="stat-card net {% if summary.net >= 0 %}positive{% else %}negative{% endif %}">
        <h3>Net Balance</h3>
        <p class="stat-value">R{{ "%.2f"|format(summary.net) }}</p>
    </div>
</div>

{% if summary.monthly %}
<div class="monthly-breakdown">
    <h3>Monthly Breakdown</h3>
    <table>
        <thead>
            <tr>
                <th>Month</th>
                <th>Income</th>
                <th>Spending</th>
                <th>Net</th>
            </tr>
        </thead>
        <tbody>
            {% for month in summary.monthly %}
            <tr>
                <td>{{ month.month }}</td>
                <td class="amount-positive">R{{ "%.2f"|format(month.income) }}</td>
                <td class="amount-negative">R{{ "%.2f"|format(abs(month.spending)) }}</td>
                <td class="{% if (month.income + month.spending) >= 0 %}amount-positive{% else %}amount-negative{% endif %}">
                    R{{ "%.2f"|format(month.income + month.spending) }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <p>No data available yet. <a href="{{ url_for('upload') }}">Upload transactions</a> to see analytics.</p>
</div>
{% endif %}
{% endblock %}
